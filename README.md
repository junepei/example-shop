쇼핑몰 예제

# 주요 entity 설계 의도 
## StyleSetProduct
상품의 속성중 set판매를 위한 정보만 모아둔 테이블. 상품번호를 PK로 사용하며 테이블 관리 정책에 따라 FK로 설정. 
|productNo | styleSetType    | styleSetPriceTag | brandNo    | brandName | price |
| :-----: | :-----: | :---: | :---: | :---: | :---: |
|상품번호(PK) | 스타일세트 구분(카테고리)   | 특성 구분  | 브랜드 번호   | 브랜드 이름  | 가격      |
### StyleSet테이블을 별도로 분리한 이유
- **상품 도메인의 영향을 최소화 시키고 싶었습니다.** <br/>
상품을 set단위로 추천하여 구매를 유도하는 것을 별도의 전시수단, 판매수단으로 생각했습니다. set로 판매하는 방식은 언제든지 중단할 수 있다고 생각했기 때문에 핵심 도메인인 product에 영향을 최소화하는 설계를 했습니다.
- **상품 테이블의 부하 최소화** <br/>
상품 테이블은 가장 많이 사용되는 테이블이고 가장 많은 정보를 저장하는 테이블입니다. set처럼 부가되는 정보 상품과 분리해서 저장하여 상품 테이블의 조회 빈도를 줄이고 상품테이블의 데이터도 늘어나지 않게 하고 싶었습니다.
- **조회시점의 부화 최소화** <br/>
운영 방법에 따라 달르겠지만 자사 상품을 파는 것이 주력인 쇼필몰은 상품의 조회가 등록/변경보다 더 부하가 클거라고 판단했습니다. 조회시점에 상품 테이블과 브랜드 테이블을 뒤져서 집계를 하면 조회에 부하가 클 수 밖에 없습니다. 상품등록시점에 필요한 집계데이터를 테이블에 추가하여 조회시점에 집계 행위를 하지 않도록 했습니다.

### styleSetType을 별도로 분리한 이유
- **카테고리는 계층 구조를 띄고 있습니다.** <br/>
set상품의 기준으로 세울 카테고리를 어떤 카테고리에 매핑 시킬 것인가가 문제가 될 수 있습니다.
상의에 추천되어 노출되어야 할 상품의 카테고리는 니트, 니트 > 집업, 니트 > 조끼 등 다양한 카테고리와 매핑이 되어야 하기 때문에 정책에 복잡도가 올라갈 수 있다고 판단했습니다.
카테고리외의 다른 분류를 추가하여 정책을 단순화 하고 운영자가 어드민을 통해서 보다 명확하게 관리할 수 있을 거라 판단 했습니다.
- **상품은 복수의 카테고리를 갖고 있습니다.** <br/>
복수의 카테고리를 이용하여 추천 영역의 어떤 카테고리를 결정하는 것은 복잡한 작업이 될 수 있습니다. 상품의 카테고리가 어떻게 등록되어 있는지에 따라 set를 운영하는 운영자의 의도와는 다른 형태로 노출이 될 수도 있습니다. 

### StyleSetProduct의 생애주기
StyleSetProduct는 Product와 일반적으로 생애주기를 함께 합니다. Product의 종속적입니다. Product가 판매가 일시중지되거나 판매종료가 된다면 StyleSetProduct에도 반영이 필요할 수 있습니다.(styleSetPriceTag 부분) 다만 변경시점은 Product의 변경없이도 StyleSetProduct의 변경이 발생할 수 있습니다. set판매의 기능확대로 set판매에 대해 부가 정보가 추가된다면 어드민을 통해 StyleSetProduct만 변경하는 경우도 있을 겁니다.

### styleSetPriceTag의 의도
상품의 노출은 사업의 의사결정에 대응할 수 있게 유연한 구조를 가져야 합니다. StyleSetProduct에 tag속성을 두어 상품 노출에 조건을 추가하거나 정렬의 우선순위를 부여할 수 있도록 설계했습니다. styleSetPriceTag는 가격과 관련된 노출을 설정할 수 있는 tag입니다.

### styleSetPriceTag의 관리
상품의 노출조건은 판매여부와 전시여부, 판매기간, 일시중지 등 여러 조건이 붙을 수 있습니다. 예제에서의 styleSetPriceTag 설정은 상품 추가/변경/삭제 상황에서만 발생하지만 판매기간, 종료기간처럼 이벤트 발생없이 시간의 경과로 상품이 노출상태가 변경이 될 수 있습니다. 실제 서비스가 진행이 된다면 데몬을 이용하여 styleSetPriceTag의 값 설정을 지속적으로 확인하여 업데이트 하는 작업이 필요하다고 계획하고 있습니다. 
